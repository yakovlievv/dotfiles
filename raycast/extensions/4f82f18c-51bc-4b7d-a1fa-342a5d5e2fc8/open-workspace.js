"use strict";var lt=Object.create;var Z=Object.defineProperty;var ut=Object.getOwnPropertyDescriptor;var ft=Object.getOwnPropertyNames;var dt=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty;var pt=(e,r)=>{for(var t in r)Z(e,t,{get:r[t],enumerable:!0})},we=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of ft(r))!ht.call(e,a)&&a!==t&&Z(e,a,{get:()=>r[a],enumerable:!(n=ut(r,a))||n.enumerable});return e};var S=(e,r,t)=>(t=e!=null?lt(dt(e)):{},we(r||!e||!e.__esModule?Z(t,"default",{value:e,enumerable:!0}):t,e)),mt=e=>we(Z({},"__esModule",{value:!0}),e);var Zt={};pt(Zt,{default:()=>tt});module.exports=mt(Zt);var et=require("@raycast/api");var yt=require("@raycast/api");var G={default:"",google:"https://google.com/search?q=",bing:"https://www.bing.com/search?q=",baidu:"https://www.baidu.com/s?wd=",brave:"https://search.brave.com/search?q=",duckduckgo:"https://duckduckgo.com/?q=",qwant:"https://www.qwant.com/?q=",kagi:"https://kagi.com/search?q="},se="https://cdn.jsdelivr.net/gh/zen-browser/branding/Main%20icons/SVG/zen-black.svg",ke=`
  # \u{1F6A8}Error: Zen Browser is not installed

  ## This extension depends on Zen browser. You must install it to continue.

  If you have [Homebrew](https://brew.sh/) installed then press \u23CE (Enter Key) to install Zen browser.
  [Click here](https://zen-browser.app/download) if you want to download manually.

  > **Note:** If Zen Browser is already installed but you're seeing this message,
  > you may need to adjust the profile configuration in the extension settings. You
  > can find your profile names by visiting \`about:profiles\` in Zen Browser.

  [![Zen Browser](${se})]()
`,bt=`
# \u{1F6A8}Error: Zen browser has no bookmarks. Please add some bookmarks to continue using this command.

[![Zen Browser](${se})]()
`,gt=`
# \u{1F6A8}Error: Something happened while trying to run your command

[![Zen Browser](${se})]()
`,oe="An Error Occurred";var $t=require("react/jsx-runtime");var xe=require("react"),$=require("@raycast/api"),Se=require("child_process");var K=require("react/jsx-runtime");function J(){let[e,r]=(0,xe.useState)(!1);return(0,K.jsx)($.Detail,{actions:(0,K.jsx)($.ActionPanel,{children:!e&&(0,K.jsx)($.Action,{title:"Install with Homebrew",onAction:async()=>{if(e)return;r(!0);let t=new $.Toast({style:$.Toast.Style.Animated,title:"Installing..."});await t.show();try{(0,Se.execSync)("brew install --cask zen-browser"),await t.hide()}catch{await t.hide(),await(0,$.showToast)($.Toast.Style.Failure,oe,"An unknown error occurred while trying to install")}r(!1)}})}),markdown:ke})}var ie=require("@raycast/api");var wt=require("react/jsx-runtime");var m=require("@raycast/api");var He=require("@raycast/api");var h=S(require("react")),l=require("@raycast/api");var ve=Object.prototype.hasOwnProperty;function q(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&q(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(ve.call(e,t)&&++n&&!ve.call(r,t)||!(t in r)||!q(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var E=S(require("node:fs")),T=S(require("node:path")),Te=S(require("node:crypto")),F=S(require("node:child_process")),_e=require("node:buffer"),W=S(require("node:stream")),Ce=require("node:util"),k=require("node:fs/promises");var w=require("react/jsx-runtime"),re=S(require("node:os")),Ue=require("node:url"),ce=globalThis;function kt(e){let r=(0,h.useRef)(e),t=(0,h.useRef)(0);return q(e,r.current)||(r.current=e,t.current+=1),(0,h.useMemo)(()=>r.current,[t.current])}function v(e){let r=(0,h.useRef)(e);return r.current=e,r}function Ie(e,r){let t=e instanceof Error?e.message:String(e);return(0,l.showToast)({style:l.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??Ee(e),secondaryAction:r?.primaryAction?Ee(e):void 0})}var Ee=e=>{let r=!0,t="[Extension Name]...",n="";try{let o=JSON.parse((0,E.readFileSync)((0,T.join)(l.environment.assetsPath,"..","package.json"),"utf8"));t=`[${o.title}]...`,n=`https://raycast.com/${o.owner||o.author}/${o.name}`,(!o.owner||o.access==="public")&&(r=!1)}catch{}let a=l.environment.isDevelopment||r,s=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(o){o.hide(),a?l.Clipboard.copy(s):(0,l.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function xt(e,r,t){let n=(0,h.useRef)(0),[a,s]=(0,h.useState)({isLoading:!0}),o=v(e),c=v(t?.abortable),i=v(r||[]),u=v(t?.onError),f=v(t?.onData),p=v(t?.onWillExecute),b=v(t?.failureToastOptions),R=v(a.data),_=(0,h.useRef)(null),g=(0,h.useRef)({page:0}),V=(0,h.useRef)(!1),j=(0,h.useRef)(!0),$e=(0,h.useRef)(50),C=(0,h.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),U=(0,h.useCallback)((...A)=>{let y=C();p.current?.(A),s(d=>({...d,isLoading:!0}));let D=St(o.current)(...A);function M(d){return d.name=="AbortError"||y===n.current&&(u.current?u.current(d):l.environment.launchType!==l.LaunchType.Background&&Ie(d,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(I){I.hide(),_.current?.(...i.current||[])}},...b.current}),s({error:d,isLoading:!1})),d}return typeof D=="function"?(V.current=!0,D(g.current).then(({data:d,hasMore:I,cursor:it})=>(y===n.current&&(g.current&&(g.current.cursor=it,g.current.lastItem=d?.[d.length-1]),f.current&&f.current(d,g.current),I&&($e.current=d.length),j.current=I,s(ct=>g.current.page===0?{data:d,isLoading:!1}:{data:(ct.data||[])?.concat(d),isLoading:!1})),d),d=>(j.current=!1,M(d)))):(V.current=!1,D.then(d=>(y===n.current&&(f.current&&f.current(d),s({data:d,isLoading:!1})),d),M))},[f,u,i,o,s,_,p,g,b,C]);_.current=U;let H=(0,h.useCallback)(()=>{g.current={page:0};let A=i.current||[];return U(...A)},[U,i]),rt=(0,h.useCallback)(async(A,y)=>{let D;try{if(y?.optimisticUpdate){C(),typeof y?.rollbackOnError!="function"&&y?.rollbackOnError!==!1&&(D=structuredClone(R.current?.value));let M=y.optimisticUpdate;s(d=>({...d,data:M(d.data)}))}return await A}catch(M){if(typeof y?.rollbackOnError=="function"){let d=y.rollbackOnError;s(I=>({...I,data:d(I.data)}))}else y?.optimisticUpdate&&y?.rollbackOnError!==!1&&s(d=>({...d,data:D}));throw M}finally{y?.shouldRevalidateAfter!==!1&&(l.environment.launchType===l.LaunchType.Background||l.environment.commandMode==="menu-bar"?await H():H())}},[H,R,s,C]),nt=(0,h.useCallback)(()=>{g.current.page+=1;let A=i.current||[];U(...A)},[g,i,U]);(0,h.useEffect)(()=>{g.current={page:0},t?.execute!==!1?U(...r||[]):C()},[kt([r,t?.execute,U]),c,g]),(0,h.useEffect)(()=>()=>{C()},[C]);let at=t?.execute!==!1?a.isLoading:!1,st={...a,isLoading:at},ot=V.current?{pageSize:$e.current,hasMore:j.current,onLoadMore:nt}:void 0;return{...st,revalidate:H,mutate:rt,pagination:ot}}function St(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Re(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function vt(e){return e instanceof URLSearchParams?e.toString():e}function Oe(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=vt(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,s=Object.prototype.toString.call(n),o=a.exec(s)?.[1]??"unknown:["+s+"]";o=o.toLowerCase();let c=null;if((c=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](n);else throw new Error('Unknown object type "'+o+'"');else{let i=Object.keys(n);i=i.sort(),Re(n)||i.splice(0,0,"prototype","__proto__","constructor"),t("object:"+i.length+":");let u=this;return i.forEach(function(f){u.dispatch(f),t(":"),u.dispatch(n[f]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let s=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(i){s.dispatch(i)});return}let o=[],c=n.map(function(i){let u=Et(),f=r.slice();return Oe(u,f).dispatch(i),o=o.concat(f.slice(r.length)),u.read().toString()});r=r.concat(o),c.sort(),this._array(c,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),Re(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function Et(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function Le(e){let r=Te.default.createHash("sha1");return Oe(r).dispatch(e),r.digest("hex")}var Q=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",le=Symbol.for("signal-exit emitter"),fe=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),ce[le])return ce[le];Object.defineProperty(ce,le,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,t){this.listeners[r].push(t)}removeListener(r,t){let n=this.listeners[r],a=n.indexOf(t);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,t,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let s of this.listeners[r])a=s(t,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",t,n)||a),a}},de=class{onExit(){return()=>{}}load(){}unload(){}},he=class{#i;#t;#e;#s;#o;#a;#n;#r;constructor(r){this.#i=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new fe,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let t of this.#r)this.#a[t]=()=>{let n=this.#e.listeners(t),{count:a}=this.#t,s=r;if(typeof s.__signal_exit_emitter__=="object"&&typeof s.__signal_exit_emitter__.count=="number"&&(a+=s.__signal_exit_emitter__.count),n.length===a){this.unload();let o=this.#t.emit("exit",null,t),c=t==="SIGHUP"?this.#i:t;o||r.kill(r.pid,c)}};this.#o=r.reallyExit,this.#s=r.emit}onExit(r,t){if(!Q(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let t=this.#a[r];t&&this.#e.on(r,t)}catch{}this.#e.emit=(r,...t)=>this.#l(r,...t),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let t=this.#a[r];if(!t)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,t)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(r){return Q(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#l(r,...t){let n=this.#s;if(r==="exit"&&Q(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let a=n.call(this.#e,r,...t);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...t)}},ue=null,Rt=(e,r)=>(ue||(ue=Q(process)?new he(process):new de),ue.onExit(e,r));function Y(e,{timeout:r}={}){let t=new Promise((c,i)=>{e.on("exit",(u,f)=>{c({exitCode:u,signal:f,timedOut:!1})}),e.on("error",u=>{i(u)}),e.stdin&&e.stdin.on("error",u=>{i(u)})}),n=Rt(()=>{e.kill()});if(r===0||r===void 0)return t.finally(()=>n());let a,s=new Promise((c,i)=>{a=setTimeout(()=>{e.kill("SIGTERM"),i(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),o=t.finally(()=>{clearTimeout(a)});return Promise.race([s,o]).finally(()=>n())}var pe=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function At(e){let{encoding:r}=e,t=r==="buffer",n=new W.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,s=[];return n.on("data",o=>{s.push(o),a+=o.length}),n.getBufferedValue=()=>t?Buffer.concat(s,a):s.join(""),n.getBufferedLength=()=>a,n}async function Ae(e,r){let t=At(r);return await new Promise((n,a)=>{let s=o=>{o&&t.getBufferedLength()<=_e.constants.MAX_LENGTH&&(o.bufferedData=t.getBufferedValue()),a(o)};(async()=>{try{await(0,Ce.promisify)(W.default.pipeline)(e,t),n()}catch(o){s(o)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&s(new pe)})}),t.getBufferedValue()}async function Pe(e,r){e.destroy();try{return await r}catch(t){return t.bufferedData}}async function X({stdout:e,stderr:r},{encoding:t},n){let a=Ae(e,{encoding:t}),s=Ae(r,{encoding:t});try{return await Promise.all([n,a,s])}catch(o){return Promise.all([{error:o,exitCode:null,signal:o.signal,timedOut:o.timedOut||!1},Pe(e,a),Pe(r,s)])}}function Pt(e){let r=typeof e=="string"?`
`:10,t=typeof e=="string"?"\r":13;return e[e.length-1]===r&&(e=e.slice(0,-1)),e[e.length-1]===t&&(e=e.slice(0,-1)),e}function ee(e,r){return e.stripFinalNewline?Pt(r):r}function Tt({timedOut:e,timeout:r,signal:t,exitCode:n}){return e?`timed out after ${r} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function _t({stdout:e,stderr:r,error:t,signal:n,exitCode:a,command:s,timedOut:o,options:c,parentError:i}){let f=`Command ${Tt({timedOut:o,timeout:c?.timeout,signal:n,exitCode:a})}: ${s}`,p=t?`${f}
${t.message}`:f,b=[p,r,e].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=i,t.message=b,t.shortMessage=p,t.command=s,t.exitCode=a,t.signal=n,t.stdout=e,t.stderr=r,"bufferedData"in t&&delete t.bufferedData,t}function De({stdout:e,stderr:r,error:t,exitCode:n,signal:a,timedOut:s,command:o,options:c,parentError:i}){if(t||n!==0||a!==null)throw _t({error:t,exitCode:n,signal:a,stdout:e,stderr:r,command:o,timedOut:s,options:c,parentError:i});return e}var te=class extends Error{constructor(r){super(r),this.name="PermissionError"}};function Ct(e){return e instanceof Error&&e.name==="PermissionError"}async function Ut(e,r,t){if(!(0,E.existsSync)(e))throw new Error("The database does not exist");let n;try{n=await(u=>import(u))("node:sqlite")}catch{return It(e,r,t)}let a=new n.DatabaseSync(e,{open:!1,readOnly:!0}),s=t?.signal;try{a.open()}catch(i){if(console.log(i),i.message.match("(5)")||i.message.match("(14)")){let u;if(!u){let f=T.default.join(re.default.tmpdir(),"useSQL",Le(e));await(0,k.mkdir)(f,{recursive:!0}),P(s),u=T.default.join(f,"db.db"),await(0,k.copyFile)(e,u),await(0,k.writeFile)(u+"-shm",""),await(0,k.writeFile)(u+"-wal",""),P(s)}a=new n.DatabaseSync(u,{open:!1,readOnly:!0}),a.open(),P(s)}}let o=a.prepare(r);P(s);let c=o.all();return a.close(),c}async function It(e,r,t){let n=t?.signal,a=F.default.spawn("sqlite3",["--json","--readonly",e,r],{signal:n}),s=Y(a),[{error:o,exitCode:c,signal:i},u,f]=await X(a,{encoding:"utf-8"},s);if(P(n),f.match("(5)")||f.match("(14)")){let p;if(!p){let b=T.default.join(re.default.tmpdir(),"useSQL",Le(e));await(0,k.mkdir)(b,{recursive:!0}),P(n),p=T.default.join(b,"db.db"),await(0,k.copyFile)(e,p),await(0,k.writeFile)(p+"-shm",""),await(0,k.writeFile)(p+"-wal",""),P(n)}a=F.default.spawn("sqlite3",["--json","--readonly","--vfs","unix-none",p,r],{signal:n}),s=Y(a),[{error:o,exitCode:c,signal:i},u,f]=await X(a,{encoding:"utf-8"},s),P(n)}if(o||c!==0||i!==null)throw f.includes("authorization denied")?new te("You do not have permission to access the database."):new Error(f||"Unknown error");return JSON.parse(u.trim()||"[]")}function P(e){if(e?.aborted){let r=new Error("aborted");throw r.name="AbortError",r}}function Me(e,r,t){let{permissionPriming:n,...a}=t||{},[s,o]=(0,h.useState)(null),c=v(t||{}),i=(0,h.useRef)(null),u=(0,h.useCallback)(p=>{console.error(p);let b=p instanceof Error&&p.message.includes("authorization denied")?new te("You do not have permission to access the database."):p;Ct(b)?o((0,w.jsx)(Ot,{priming:c.current.permissionPriming})):c.current.onError?c.current.onError(b):l.environment.launchType!==l.LaunchType.Background&&Ie(b,{title:"Cannot query the data"})},[c]),f=(0,h.useMemo)(()=>{if(!(0,E.existsSync)(e))throw new Error("The database does not exist");return async(p,b)=>{let R=i.current?.signal;return Ut(p,b,{signal:R})}},[e]);return{...xt(f,[e,r],{...a,onError:u}),permissionView:s}}function Ot(e){let r=parseInt(re.default.release().split(".")[0])>=22,t=r?"Settings":"Preferences",n=r?{title:"Open System Settings -> Privacy",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"}:{title:"Open System Preferences -> Security",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"};return l.environment.commandMode==="menu-bar"?(0,w.jsxs)(l.MenuBarExtra,{icon:l.Icon.Warning,title:l.environment.commandName,children:[(0,w.jsx)(l.MenuBarExtra.Item,{title:"Raycast needs full disk access",tooltip:`You can revert this access in ${t} whenever you want`}),e.priming?(0,w.jsx)(l.MenuBarExtra.Item,{title:e.priming,tooltip:`You can revert this access in ${t} whenever you want`}):null,(0,w.jsx)(l.MenuBarExtra.Separator,{}),(0,w.jsx)(l.MenuBarExtra.Item,{title:n.title,onAction:()=>(0,l.open)(n.target)})]}):(0,w.jsx)(l.List,{children:(0,w.jsx)(l.List.EmptyView,{icon:{source:{light:"https://raycast.com/uploads/extensions-utils-security-permissions-light.png",dark:"https://raycast.com/uploads/extensions-utils-security-permissions-dark.png"}},title:"Raycast needs full disk access.",description:`${e.priming?e.priming+`
`:""}You can revert this access in ${t} whenever you want.`,actions:(0,w.jsx)(l.ActionPanel,{children:(0,w.jsx)(l.Action.Open,{...n})})})})}function We(e,r){let t=n=>n.startsWith("http")?n:`https://${n}`;try{let n=c=>c.startsWith("http")?c:`https://${c}`,s=(typeof e=="string"?new Ue.URL(n(e)):e).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:r?.fallback??l.Icon.Link,mask:r?.mask};case"apple":return{source:r?.fallback??l.Icon.Link,mask:r?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${s}.ico`,fallback:r?.fallback??l.Icon.Link,mask:r?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${r?.size??64}&domain=${s}`,fallback:r?.fallback??l.Icon.Link,mask:r?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${s}&size=${r?.size??64}`,fallback:r?.fallback??l.Icon.Link,mask:r?.mask}}}catch(n){return console.error(n),l.Icon.Link}}async function Ne(e,r,t){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:a,timeout:s,...o}=Array.isArray(r)?t||{}:r||{},c=n!==!1?[]:["-ss"];a==="JavaScript"&&c.push("-l","JavaScript"),Array.isArray(r)&&c.push("-",...r);let i=F.default.spawn("osascript",c,{...o,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),u=Y(i,{timeout:s??1e4});i.stdin.end(e);let[{error:f,exitCode:p,signal:b,timedOut:R},_,g]=await X(i,{encoding:"utf8"},u),V=ee({stripFinalNewline:!0},_),j=ee({stripFinalNewline:!0},g);return De({stdout:V,stderr:j,error:f,exitCode:p,signal:b,timedOut:R,command:"osascript",options:t,parentError:new Error})}async function me(e,r){if(process.platform!=="win32")throw new Error("PowerShell is only supported on Windows");let{timeout:t,...n}=r||{},a=["-NoLogo","-NoProfile","-NonInteractive","-Command","-"],s=F.default.spawn("powershell.exe",a,{...n}),o=Y(s,{timeout:t??1e4});s.stdin.end(e);let[{error:c,exitCode:i,signal:u,timedOut:f},p,b]=await X(s,{encoding:"utf8"},o),R=ee({stripFinalNewline:!0},p),_=ee({stripFinalNewline:!0},b);return De({stdout:R,stderr:_,error:c,exitCode:i,signal:u,timedOut:f,command:"powershell.exe",options:r,parentError:new Error})}var be=require("@raycast/api");var ze=S(require("fs")),B=S(require("path")),Ve=()=>{if(!process.env.HOME)throw new Error("$HOME environment variable is not set.");let e=(0,be.getPreferenceValues)();return e.profilesDirectory?e.profilesDirectory:process.platform=="darwin"?B.default.join(process.env.HOME,"Library","Application Support","zen","Profiles"):B.default.join(process.env.HOME,"AppData","Roaming","zen","Profiles")},je=e=>{let r=ze.default.readdirSync(e),t=(0,be.getPreferenceValues)(),n=r.filter(i=>i.endsWith(t.profileDirectorySuffix))[0];if(n)return n;let a=r.filter(i=>i.endsWith(".Default (release)"))[0];if(a)return a;let s=r.filter(i=>i.endsWith(".Default (beta)"))[0];if(s)return s;let o=r.filter(i=>i.endsWith(".Default (alpha)"))[0];if(o)return o;let c=r.filter(i=>i.includes(".Default ("))[0];return c||""};var Fe=()=>{let e=Ve();return B.default.join(e,je(e),"places.sqlite")},Be=()=>{let e=Ve();return B.default.join(e,je(e),"zen-keyboard-shortcuts.json")};function Lt(e=!1){return[e?'tell application "Raycast" to activate':null,'tell application "Zen" to activate','tell application "System Events"',"  repeat 10 times",'    if frontmost of process "Zen" then exit repeat',"    delay 0.1","  end repeat","end tell"].filter(t=>!!t).join(`
`)}async function Ze(e){let r=e.modifiers.map(a=>`${a} down`).join(", "),t=`keystroke "${e.key}" using {${r}}`,n=[Lt(!0),'tell application "System Events"',`  ${t}`,"end tell"].join(`
`);await Ne(n)}var ge=require("os");var x=require("react/jsx-runtime"),N=class{static NewTab=Dt;static HistoryItem=Mt;static WorkspaceItem=Wt};function Dt({query:e}){return(0,x.jsx)(m.ActionPanel,{title:"New Tab",children:(0,x.jsx)(m.Action,{title:"Open with Zen",onAction:async()=>{(0,ge.platform)()==="win32"?await me(`Start-Process "zen" "${G[(0,m.getPreferenceValues)().searchEngine.toLowerCase()]}${e||""}"`):(0,m.open)(`${G[(0,m.getPreferenceValues)().searchEngine.toLowerCase()]}${e||""}`,"zen")}})})}function Mt({entry:{title:e,url:r}}){return(0,x.jsxs)(m.ActionPanel,{title:e,children:[(0,x.jsx)(m.Action,{title:"Open with Zen",onAction:async()=>{(0,ge.platform)()==="win32"?await me(`Start-Process "zen" "${r}"`):(0,m.open)(r,"zen")}}),(0,x.jsx)(m.Action.OpenInBrowser,{title:"Open in Default Browser",url:r,shortcut:{modifiers:["opt"],key:"enter"}}),(0,x.jsx)(m.Action.CopyToClipboard,{title:"Copy URL",content:r,shortcut:{modifiers:["cmd","shift"],key:"c"}})]})}function Wt(e){return(0,x.jsxs)(m.ActionPanel,{title:e.workspace.name,children:[e.workspace.shortcut&&(0,x.jsx)(Nt,{workspace:e.workspace}),(0,x.jsx)(m.Action.Open,{title:"Change Shortcut in Keyboard Shortcuts",target:"about:preferences",application:"Zen"})]})}function Nt(e){return(0,x.jsx)(m.Action,{title:"Open Workspace",icon:m.Icon.AppWindowSidebarLeft,onAction:async()=>{await Ze(e.workspace.shortcut),(0,m.popToRoot)(),(0,m.closeMainWindow)()}})}var O=require("@raycast/api");var L=require("react/jsx-runtime"),ne=class{static NewTabEntry=zt;static HistoryEntry=jt;static WorkspaceEntry=Vt};function zt({searchText:e}){return(0,L.jsx)(O.List.Item,{title:e?`Search "${e}"`:"Open Empty Tab",icon:{source:e?O.Icon.MagnifyingGlass:O.Icon.Plus},actions:(0,L.jsx)(N.NewTab,{query:e})})}function Vt({workspace:e}){let r=e.shortcut?{text:`${e.shortcut.modifiers.map(t=>t[0].toUpperCase()+t.slice(1)).join("+")}+${e.shortcut.key.toUpperCase()}`}:{text:"Assign a Shortcut",tooltip:"Shortcuts are necessary to make this feature work"};return(0,L.jsx)(O.List.Item,{title:e.name,accessories:[{text:e.is_default?"Default":""},r],actions:(0,L.jsx)(N.WorkspaceItem,{workspace:e}),icon:{source:e.icon}})}function jt({entry:{url:e,title:r,id:t,lastVisited:n}}){return(0,L.jsx)(O.List.Item,{id:t.toString(),title:r||"",subtitle:e,icon:We(e),actions:(0,L.jsx)(N.HistoryItem,{entry:{url:e,title:r,id:t,lastVisited:n}})})}var Qe=require("fs");var z=require("react"),Ge=5,Ke=({error:e,onRetry:r})=>{let[t,n]=(0,z.useState)(0),a=(0,z.useRef)(null);(0,z.useEffect)(()=>{if(!(e?.message?.includes("database is locked")||e?.message?.includes("disk image is malformed"))){t!==0&&n(0);return}if(!(t>=Ge))return console.warn(`Retrying SQL Query... Attempt ${t+1}/${Ge}`),a.current=setTimeout(()=>{n(o=>o+1),r()},500),()=>{a.current&&clearTimeout(a.current)}},[e,t])};var ae=S(require("fs"));var qe=require("react/jsx-runtime"),Ft={control:"control",alt:"option",shift:"shift",meta:"command",accel:"fn"};function Je(){let e=Be();if(!(0,ae.existsSync)(e))return{shortcuts:[],errorView:(0,qe.jsx)(J,{})};let r=ae.default.readFileSync(e,"utf8"),{shortcuts:t}=JSON.parse(r);return{shortcuts:t.map(a=>{if(a.key){let s=[];for(let[o,c]of Object.entries(a.modifiers))c&&s.push(Ft[o]);return{id:a.id,key:a.key,modifiers:s}}}).filter(Boolean),errorView:void 0}}var Xe=require("react/jsx-runtime"),Ye=()=>{let{shortcuts:e,errorView:r}=Je(),{data:t,isLoading:n,permissionView:a}=Bt(),s=r||a;return t?{data:t.map(c=>{let i=e.find(u=>u.id===`zen-workspace-switch-${c.position/1e3}`);return{...c,shortcut:i}}).sort((c,i)=>c.position-i.position),isLoading:n,errorView:s}:{data:t,isLoading:n,errorView:s}},Bt=()=>{let e=Fe(),r=Ht();if(!(0,Qe.existsSync)(e))return{data:[],isLoading:!1,permissionView:(0,Xe.jsx)(J,{})};let{data:t,isLoading:n,error:a,permissionView:s,revalidate:o}=Me(e,r);return Ke({error:a,onRetry:o}),{data:t,isLoading:n,permissionView:s}},Ht=()=>`
  SELECT * FROM zen_workspaces;
  `;var ye=require("react/jsx-runtime");function tt(){let{data:e,isLoading:r,errorView:t}=Ye();return t||(0,ye.jsx)(et.List,{isLoading:r,children:e?.map(n=>(0,ye.jsx)(ne.WorkspaceEntry,{workspace:n},n.uuid))})}
